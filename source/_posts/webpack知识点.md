---
title: webpack知识点
date: 2023-09-12 18:33:54
tags: [webpack]
---

## webpack的构建过程
1. 入口文件：首先找到入口文件，入口文件是应用程序的主要模块，从人口点开始分析构建。
2. 依赖解析：根据入口文件及依赖关系图解析模块之间的依赖关系，确定构建过程中需要包含的所有模块。
3. 加载器：使用加载器来处理非JavaScript文件（如CSS、图片、字体），每个文件被视为一个模块，并且可以通过加载器进行转换和处理。
4. 插件：插件可以用于优化输出、资源管理、注入环境变量等。
5. 打包和输出：将所有模块及其依赖关系打包成一个或多个捆绑包。
6. 优化与代码分割：包括代码压缩、模块合并、按需加载等。

## webpack scope hoisting
即webpack作用域提升，在开发环境中，webpack会将每一个模块打包为一个函数，而函数会添加执行上下文，并加入执行栈，从而增加运行成本。
webpack scope hoisting将不同模块合并在同一个函数下，从而实现作用域提升，提高运行效率，降低打包体积。  
注意：如果遇到某些模块多次被其他模块引用，或者使用了动态导入的模块，或者非ESM模块，都不会有scope hoisting。

## webpack5新增了哪些变化
1. 自动清除输出目录，无需使用插件clean-webpack-plugin。
2. top-level-await：允许在模块的顶级代码中直接使用await。
3. 打包体积优化：更智能地处理模块合并、作用域提升、`tree shaking`等。
4. 打包缓存开箱即用而无需使用`cache-loader`插件。（可以用`cache`配置缓存类型，支持`memory`、`filesystem`）
5. 资源模块：原生支持资源型模块，无需插件（`file-loader`、`url-loader`、`raw-loader`）。